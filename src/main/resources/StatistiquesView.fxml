<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<AnchorPane fx:id="statistiquesPane" xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.example.pidev.controllers.StatistiqueMaterielController"
            style="-fx-background-color: #f5f5f5;">

    <!-- Cartes statistiques rÃ©duites -->
    <HBox spacing="30" layoutX="50" layoutY="30" alignment="CENTER">
        <VBox style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 0);"
              prefWidth="500" prefHeight="65" alignment="CENTER">
            <padding>
                <Insets top="5" right="8" bottom="5" left="8"/>
            </padding>
            <Label text="Total des demandes" style="-fx-font-size: 14px; -fx-text-fill: #666666;"/>
            <Label fx:id="totalDemandesLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
        </VBox>

        <VBox style="-fx-background-color: white; -fx-background-radius: 10; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 0);"
              prefWidth="450" prefHeight="65" alignment="CENTER">
            <padding>
                <Insets top="5" right="8" bottom="5" left="8"/>
            </padding>
            <Label text="Temps moyen de traitement" style="-fx-font-size: 14px; -fx-text-fill: #666666;"/>
            <Label fx:id="tempsMoyenLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;"/>
        </VBox>
    </HBox>

    <!-- Graphiques -->
    <HBox spacing="30" layoutX="50" layoutY="120" alignment="CENTER">
        <!-- Pie Chart agrandi -->
        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 0);"
              prefWidth="500" prefHeight="280" alignment="CENTER">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <PieChart fx:id="pieChartStatut" prefWidth="460" prefHeight="260"/>
        </VBox>

        <!-- Bar Chart attente -->
        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 0);"
              prefWidth="540" prefHeight="280" alignment="CENTER">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <BarChart fx:id="barChartAttente" prefWidth="460" prefHeight="250">
                <xAxis>
                    <CategoryAxis label="MatÃ©riaux" style="-fx-font-size: 13px;"/>
                </xAxis>
                <yAxis>
                    <NumberAxis label="Heures d'attente" style="-fx-font-size: 13px;"/>
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>

    <!-- Histogramme clients : plus bas, labels clairs -->
    <VBox layoutX="50" layoutY="430" prefWidth="1000" prefHeight="270" alignment="CENTER"
          style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 8, 0, 0, 0);">
        <padding>
            <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>
        <BarChart fx:id="barChartDemandes" prefWidth="940" prefHeight="250">
            <xAxis>
                <CategoryAxis label="Clients" style="-fx-font-size: 14px;"/>
            </xAxis>
            <yAxis>
                <NumberAxis label="Nombre de demandes" style="-fx-font-size: 14px;"/>
            </yAxis>
        </BarChart>
    </VBox>

    <!-- Bouton tÃ©lÃ©chargement plus bas et Ã  droite -->
    <HBox layoutX="830" layoutY="720" alignment="CENTER_RIGHT" prefWidth="300">
        <Button fx:id="telechargerButton"
                text="ðŸ“¥ TÃ©lÃ©charger les statistiques"
                onAction="#telechargerCapture"
                style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-font-size: 15px; -fx-font-weight: bold; -fx-padding: 10 25 10 25; -fx-background-radius: 10;"/>
    </HBox>

</AnchorPane>
